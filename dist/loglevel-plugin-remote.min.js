!function(e,t){if("function"==typeof define&&define.amd)define(["module","exports"],t);else if("undefined"!=typeof exports)t(module,exports);else{var n={exports:{}};t(n,n.exports),e.remote=n.exports}}(this,function(e,t){"use strict";function n(e){try{return JSON.stringify(e)}catch(e){if(!s)try{var t={};t.a=t,JSON.stringify(t)}catch(e){s=e.message}if("TypeError"===e.name&&e.message===s)return"[Circular]";throw e}}function r(e){if(!Object.getOwnPropertyDescriptor||!Object.getPrototypeOf)return Object.prototype.toString.call(e).slice(8,-1);for(;e;){var t=Object.getOwnPropertyDescriptor(e,"constructor");if(void 0!==t&&"function"==typeof t.value&&""!==t.value.name)return t.value.name;e=Object.getPrototypeOf(e)}return""}function o(e){var t="",o=0;return e.length>1&&"string"==typeof e[0]&&(t=(t=e[0].replace(/(%?)(%([sdjo]))/g,function(t,a,i,s){if(!a){var c=e[o+=1],u="";switch(s){case"s":u+=c;break;case"d":u+=+c;break;case"j":u=n(c);break;case"o":var f=n(c);"{"!==f[0]&&"["!==f[0]&&(f="<"+f+">"),u=r(c)+f}return u}return t})).replace(/%{2,2}/g,"%"),o+=1),e.length>o&&(t&&(t+=" "),t+=e.slice(o).join(" ")),t}function a(){for(var e={},t=0;t<arguments.length;t+=1){var n=Object(arguments[t]);for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}function i(){try{throw new Error}catch(e){return e.stack}}Object.defineProperty(t,"__esModule",{value:!0});var s=void 0,c="";window&&window.location&&(c=window.location.origin||""),!c&&document&&document.location&&(c=document.location.origin||"");var u={url:c+"/logger",token:"",timeout:0,suspend:100,queueSize:0,trace:["trace","warn","error"],depth:0,json:!1,timestamp:function(){return(new Date).toISOString()},backoff:function(e){var t=2*e;return t>3e4&&(t=3e4),t+=.1*t*Math.random()}},f=!!i(),l=!1,p=[],remote={apply:function(e,t){function r(){function e(){setTimeout(function(){d=!1,r()},m),d=!0,m=t.backoff(m)}if(!d&&!g&&(p.length||w.messages.length)){if(g=!0,!w.messages.length)if(w.messages=p,p=[],w.content="",t.json)w.content=n({messages:w.messages});else{var o="";w.messages.forEach(function(e){var t=e.stacktrace?"\n"+e.stacktrace:"";w.content+=""+o+e.message+t,o="\n"})}var a=new window.XMLHttpRequest;a.open("POST",t.url,!0),a.setRequestHeader("Content-Type",c),t.token&&a.setRequestHeader("Authorization",s);var i=void 0;a.onreadystatechange=function(){4===a.readyState&&(g=!1,clearTimeout(i),200===a.status?(m=t.suspend,w={messages:[]},r()):e())},a.send(w.content),t.timeout&&(i=setTimeout(function(){g=!1,a.abort(),e()},t.timeout))}}if(!e||!e.getLogger)throw new TypeError("Argument is not a root loglevel object");if(l)throw new TypeError("You can assign a plugin only one time");if(!window||!window.XMLHttpRequest)return e;l=!0;var s="Bearer "+(t=a(u,t)).token,c=t.json?"application/json":"text/plain",g=!1,d=!1,m=t.suspend,w={messages:[]},v=e.methodFactory;return e.methodFactory=function(e,n,a){var s=v(e,n,a),c=f&&t.trace.some(function(t){return t===e});return function(){for(var n=arguments.length,u=Array(n),f=0;f<n;f++)u[f]=arguments[f];if(!t.queueSize||p.length+w.messages.length<t.queueSize){var l=t.timestamp(),g=c?i():"";if(g){var d=g.split("\n");d.splice(0,t.depth+3),g=d.join("\n")}p.push({message:o(u),stacktrace:g,timestamp:l,level:e,logger:a}),r()}s.apply(void 0,u)}},e.setLevel(e.getLevel()),e}},g=window?window.remote:void 0;remote.noConflict=function(){return window&&window.remote===remote&&(window.remote=g),remote},t.default=remote,e.exports=t.default});