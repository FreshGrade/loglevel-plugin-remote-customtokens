!function(e,t){if("function"==typeof define&&define.amd)define(["module","exports"],t);else if("undefined"!=typeof exports)t(module,exports);else{var n={exports:{}};t(n,n.exports),e.remote=n.exports}}(this,function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e){try{return JSON.stringify(e)}catch(e){if(!u)try{var t={};t.a=t,JSON.stringify(t)}catch(e){u=e.message}if(e.message===u)return"[Circular]";throw e}}function o(e){if(!Object.getOwnPropertyDescriptor||!Object.getPrototypeOf)return Object.prototype.toString.call(e).slice(8,-1);for(;e;){var t=Object.getOwnPropertyDescriptor(e,"constructor");if(void 0!==t&&"function"==typeof t.value&&""!==t.value.name)return t.value.name;e=Object.getPrototypeOf(e)}return""}function a(e){var t="",n=0;return e.length>1&&"string"==typeof e[0]&&(t=(t=e[0].replace(/(%?)(%([sdjo]))/g,function(t,a,s,i){if(!a){var c=e[n+=1],u="";switch(i){case"s":u+=c;break;case"d":u+=+c;break;case"j":u=r(c);break;case"o":var f=r(c);"{"!==f[0]&&"["!==f[0]&&(f="<"+f+">"),u=o(c)+f}return u}return t})).replace(/%{2,2}/g,"%"),n+=1),e.length>n&&(t&&(t+=" "),t+=e.slice(n).join(" ")),t}function s(){for(var e={},t=0;t<arguments.length;t+=1){var n=Object(arguments[t]);for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}function i(){try{throw new Error}catch(e){return e.stack}}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=void 0,f={url:"/logger",token:"",timeout:0,interval:100,backoff:function(e){var t=2*e;return t>3e4&&(t=3e4),t+=.1*t*Math.random()},capacity:0,trace:["trace","warn","error"],depth:0,json:!1,timestamp:function(){return(new Date).toISOString()}},l=!!i(),g=void 0,p=void 0,h=void 0,remote={apply:function(e,t){function o(){function e(e){d=!0,setTimeout(function(){d=!1,o()},w),e||(w=t.backoff(w))}if(!d&&!v&&(b.length||O.messages.length)){if(v=!0,O.messages.length?y&&(j.unshift(O.messages),O.messages=j.shift(t.capacity)):y?(O.messages=j.shift(t.capacity),O.messages.length||(y=!1,O.messages=b,b=[])):(O.messages=b,b=[]),!O.content)if(t.json)O.content=r({messages:O.messages});else{var n="";O.content="",O.messages.forEach(function(e){var t=e.stacktrace?"\n"+e.stacktrace:"";O.content+=""+n+e.message+t,n="\n"})}var a=new window.XMLHttpRequest;a.open("POST",t.url,!0),a.setRequestHeader("Content-Type",m),t.token&&a.setRequestHeader("Authorization",u);var s=void 0;t.timeout&&(s=setTimeout(function(){v=!1,a.abort(),e()},t.timeout)),a.onreadystatechange=function(){4===a.readyState&&(v=!1,clearTimeout(s),200===a.status?(w=t.interval,O={messages:[]},e(!0)):e())},a.send(O.content)}}if(!e||!e.getLogger)throw new TypeError("Argument is not a root loglevel object");if(g)throw new Error("You can assign a plugin only one time");if(!window||!window.XMLHttpRequest)return e;g=e;var u="Bearer "+(t=s(f,t)).token,m=t.json?"application/json":"text/plain",v=!1,d=!1,y=!1,w=t.interval,b=[],O={messages:[]},j=new(function(){function e(){n(this,e),this.storage=window.localStorage}return c(e,[{key:"push",value:function(e){for(var n=JSON.parse(this.storage.messages);;){var r=JSON.stringify(n.concat(e));try{this.storage.messages=r;break}catch(e){n.splice(0,t.capacity)}}}},{key:"shift",value:function(e){var t=JSON.parse(this.storage.messages),n=t.splice(0,e);return this.storage.messages=JSON.stringify(t),n}},{key:"unshift",value:function(e){var t=JSON.parse(this.storage.messages),n=JSON.stringify(e.concat(t));try{this.storage.messages=n}catch(e){}}}]),e}());return p=p||e.methodFactory,h=function(e,n,r){var s=p(e,n,r),c=l&&t.trace.some(function(t){return t===e});return function(){for(var n=arguments.length,u=Array(n),f=0;f<n;f++)u[f]=arguments[f];var l=t.timestamp(),g=c?i():"";if(g){var p=g.split("\n");p.splice(0,t.depth+3),g=p.join("\n")}y?t.capacity&&b.length>=t.capacity&&(j.push(b),b=[]):t.capacity&&b.length+O.messages.length>=t.capacity&&(y=!0,j.push(b),b=[]),b.push({message:a(u),level:e,logger:r,timestamp:l,stacktrace:g}),o(),s.apply(void 0,u)}},e.methodFactory=h,e.setLevel(e.getLevel()),e},disable:function(){if(!g)throw new Error("You can't disable a not appled plugin");if(h!==g.methodFactory)throw new Error("You can't disable a plugin after appling another plugin");g.methodFactory=p,g.setLevel(g.getLevel()),p=void 0,g=void 0}},m=window?window.remote:void 0;remote.noConflict=function(){return window&&window.remote===remote&&(window.remote=m),remote},t.default=remote,e.exports=t.default});