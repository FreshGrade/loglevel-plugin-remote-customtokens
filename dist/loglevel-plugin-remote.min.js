!function(e,t){if("function"==typeof define&&define.amd)define(["module","exports"],t);else if("undefined"!=typeof exports)t(module,exports);else{var o={exports:{}};t(o,o.exports),e.remote=o.exports}}(this,function(e,t){"use strict";function o(e){try{return JSON.stringify(e)}catch(e){if(!r)try{var t={};t.a=t,JSON.stringify(t)}catch(e){r=e.message}if("TypeError"===e.name&&e.message===r)return"[Circular]";throw e}}function n(e){if(!Object.getOwnPropertyDescriptor||!Object.getPrototypeOf)return Object.prototype.toString.call(e).slice(8,-1);for(;e;){var t=Object.getOwnPropertyDescriptor(e,"constructor");if(void 0!==t&&"function"==typeof t.value&&""!==t.value.name)return t.value.name;e=Object.getPrototypeOf(e)}return""}Object.defineProperty(t,"__esModule",{value:!0});var r=void 0,i=function(e){var t="",r=0;return e.length>1&&"string"==typeof e[0]&&(t=(t=e[0].replace(/(%?)(%([sdjo]))/g,function(t,i,a,s){if(!i){var u=e[r+=1],c="";switch(s){case"s":c+=u;break;case"d":c+=+u;break;case"j":c=o(u);break;case"o":var f=o(u);"{"!==f[0]&&"["!==f[0]&&(f="<"+f+">"),c=n(u)+f}return c}return t})).replace(/%{2,2}/g,"%"),r+=1),e.length>r&&(t&&(t+=" "),t+=e.slice(r).join(" ")),t},a=function(e){for(var t=1;t<arguments.length;t+=1)for(var o in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],o)&&(e[o]=arguments[t][o]);return e},s=function(){try{throw new Error("")}catch(e){return e.stack}},u=!!s(),c=[],f=!1,l="";window&&window.location&&(l=window.location.origin||""),!l&&document&&document.location&&(l=document.location.origin||"");var p={url:l+"/logger",token:"",timeout:0,suspend:100,queueSize:0,trace:["trace","warn","error"],depth:0,json:!1,timestamp:function(){return(new Date).toISOString()},backoff:function(e){var t=2*e;return t>3e4&&(t=3e4),t+=.1*t*Math.random()}},remote={apply:function(e,t){if(!e||!e.getLogger)throw new TypeError("Argument is not a root loglevel object");if(f)throw new TypeError("You can assign a plugin only one time");if(!window||!window.XMLHttpRequest)return e;f=!0,t=a({},p,t);for(var n={},r=0;r<t.trace.length;r+=1){var l=t.trace[r];n[l]=!0}var d="Bearer "+t.token,m=t.json?"application/json":"text/plain",g="ontimeout"in new window.XMLHttpRequest,v=!1,w=!1,y=t.suspend,h=void 0,j=function e(){if(c.length&&!v&&!w){if(v=!0,!h){h={messages:c},c=[];var n="";if(t.json)n=o({messages:h.messages});else{var r="";h.messages.forEach(function(e){n+=r,n+=e.message,r="\n"})}h.content=n}var i=void 0,a=new window.XMLHttpRequest;a.open("POST",t.url,!0),a.setRequestHeader("Content-Type",m),t.token&&a.setRequestHeader("Authorization",d);var s=function(){w=!0,setTimeout(function(){w=!1,e()},y),y=t.backoff(y)},u=function(){v=!1,a.abort(),s()};a.onreadystatechange=function(){4===a.readyState&&(v=!1,clearTimeout(i),200===a.status?(y=t.suspend,h=void 0,e()):s())},g?(a.timeout=t.timeout,a.ontimeout=u):t.timeout&&(i=setTimeout(u,t.timeout)),a.send(h.content)}},O=e.methodFactory;return e.methodFactory=function(e,o,r){var a=O(e,o,r),f=u&&e in n;return function(){for(var o=arguments.length,n=Array(o),u=0;u<o;u++)n[u]=arguments[u];var l=void 0;t.json&&(l=t.timestamp()),t.queueSize&&c.length>=t.queueSize&&c.shift();var p=f?s():"";if(p){var d=p.split("\n");d.splice(0,t.depth+3),p=d.join("\n")}if(t.json)c.push({message:i(n),stacktrace:p,timestamp:l,level:e,logger:r});else{var m=p?"\n"+p:"";c.push({message:""+i(n)+m})}j(),a.apply(void 0,n)}},e.setLevel(e.getLevel()),e}},d=window?window.remote:void 0;remote.noConflict=function(){return window&&window.remote===remote&&(window.remote=d),remote},t.default=remote,e.exports=t.default});