!function(e,t){if("function"==typeof define&&define.amd)define(["module","exports"],t);else if("undefined"!=typeof exports)t(module,exports);else{var n={exports:{}};t(n,n.exports),e.remote=n.exports}}(this,function(e,t){"use strict";function n(e){try{return JSON.stringify(e)}catch(e){if(!c)try{var t={};t.a=t,JSON.stringify(t)}catch(e){c=e.message}if("TypeError"===e.name&&e.message===c)return"[Circular]";throw e}}function r(e){if(!Object.getOwnPropertyDescriptor||!Object.getPrototypeOf)return Object.prototype.toString.call(e).slice(8,-1);for(;e;){var t=Object.getOwnPropertyDescriptor(e,"constructor");if(void 0!==t&&"function"==typeof t.value&&""!==t.value.name)return t.value.name;e=Object.getPrototypeOf(e)}return""}function o(e){var t="",o=0;return e.length>1&&"string"==typeof e[0]&&(t=(t=e[0].replace(/(%?)(%([sdjo]))/g,function(t,i,a,s){if(!i){var c=e[o+=1],u="";switch(s){case"s":u+=c;break;case"d":u+=+c;break;case"j":u=n(c);break;case"o":var f=n(c);"{"!==f[0]&&"["!==f[0]&&(f="<"+f+">"),u=r(c)+f}return u}return t})).replace(/%{2,2}/g,"%"),o+=1),e.length>o&&(t&&(t+=" "),t+=e.slice(o).join(" ")),t}function i(){for(var e={},t=0;t<arguments.length;t+=1){var n=Object(arguments[t]);for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}function a(){try{throw new Error}catch(e){return e.stack}}function s(){return{messages:[],length:0,content:""}}Object.defineProperty(t,"__esModule",{value:!0});var c=void 0,u=!!a(),f="";window&&window.location&&(f=window.location.origin||""),!f&&document&&document.location&&(f=document.location.origin||"");var l={url:f+"/logger",token:"",timeout:0,suspend:100,queueSize:0,trace:["trace","warn","error"],depth:0,json:!1,timestamp:function(){return(new Date).toISOString()},backoff:function(e){var t=2*e;return t>3e4&&(t=3e4),t+=.1*t*Math.random()}},p=!1,g=[],remote={apply:function(e,t){function r(){function e(){m=!0,setTimeout(function(){m=!1,r()},w),w=t.backoff(w)}if(!m&&!d&&(g.length||v.length)){if(d=!0,!v.length){v.messages=g,v.length=g.length,g=[];var o="";if(t.json)o=n({messages:v.messages});else{var i="";v.messages.forEach(function(e){var t=e.stacktrace?"\n"+e.stacktrace:"";o+=""+i+e.message+t,i="\n"})}v.content=o}var a=new window.XMLHttpRequest;a.open("POST",t.url,!0),a.setRequestHeader("Content-Type",f),t.token&&a.setRequestHeader("Authorization",c);var u=void 0;a.onreadystatechange=function(){4===a.readyState&&(d=!1,clearTimeout(u),200===a.status?(w=t.suspend,v=s(),r()):e())},a.send(v.content),t.timeout&&(u=setTimeout(function(){d=!1,a.abort(),e()},t.timeout))}}if(!e||!e.getLogger)throw new TypeError("Argument is not a root loglevel object");if(p)throw new TypeError("You can assign a plugin only one time");if(!window||!window.XMLHttpRequest)return e;p=!0;var c="Bearer "+(t=i(l,t)).token,f=t.json?"application/json":"text/plain",d=!1,m=!1,w=t.suspend,v=s(),h=e.methodFactory;return e.methodFactory=function(e,n,i){var s=h(e,n,i),c=u&&t.trace.some(function(t){return t===e});return function(){for(var n=arguments.length,u=Array(n),f=0;f<n;f++)u[f]=arguments[f];if(!(t.queueSize&&g.length+v.length>=t.queueSize)){var l=t.timestamp(),p=c?a():"";if(p){var d=p.split("\n");d.splice(0,t.depth+3),p=d.join("\n")}g.push({message:o(u),stacktrace:p,timestamp:l,level:e,logger:i}),r()}s.apply(void 0,u)}},e.setLevel(e.getLevel()),e}},d=window?window.remote:void 0;remote.noConflict=function(){return window&&window.remote===remote&&(window.remote=d),remote},t.default=remote,e.exports=t.default});