!function(e,t){if("function"==typeof define&&define.amd)define(["module","exports"],t);else if("undefined"!=typeof exports)t(module,exports);else{var r={exports:{}};t(r,r.exports),e.remote=r.exports}}(this,function(e,t){"use strict";function r(e){try{return JSON.stringify(e)}catch(e){if(!o)try{var t={};t.a=t,JSON.stringify(t)}catch(e){o=e.message}if("TypeError"===e.name&&e.message===o)return"[Circular]";throw e}}function n(e){if(!Object.getOwnPropertyDescriptor||!Object.getPrototypeOf)return Object.prototype.toString.call(e).slice(8,-1);for(;e;){var t=Object.getOwnPropertyDescriptor(e,"constructor");if(void 0!==t&&"function"==typeof t.value&&""!==t.value.name)return t.value.name;e=Object.getPrototypeOf(e)}return""}Object.defineProperty(t,"__esModule",{value:!0});var o=void 0,i=function(e){var t="",o=0;return e.length>1&&"string"==typeof e[0]&&(t=(t=e[0].replace(/(%?)(%([sdjo]))/g,function(t,i,a,s){if(!i){var c=e[o+=1],u="";switch(s){case"s":u+=c;break;case"d":u+=+c;break;case"j":u=r(c);break;case"o":var f=r(c);"{"!==f[0]&&"["!==f[0]&&(f="<"+f+">"),u=n(c)+f}return u}return t})).replace(/%{2,2}/g,"%"),o+=1),e.length>o&&(t&&(t+=" "),t+=e.slice(o).join(" ")),t},a=function(e){for(var t=1;t<arguments.length;t+=1)for(var r in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],r)&&(e[r]=arguments[t][r]);return e},s=function(){try{throw new Error("")}catch(e){return e.stack}},c=!!s(),u="";window&&window.location&&(u=window.location.origin||""),!u&&document&&document.location&&(u=document.location.origin||"");var f={url:u+"/logger",token:"",timeout:0,suspend:100,queueSize:0,trace:["trace","warn","error"],depth:0,json:!1,timestamp:function(){return(new Date).toISOString()},backoff:function(e){var t=2*e;return t>3e4&&(t=3e4),t+=.1*t*Math.random()}},l=!1,p=[],remote={apply:function(e,t){if(!e||!e.getLogger)throw new TypeError("Argument is not a root loglevel object");if(l)throw new TypeError("You can assign a plugin only one time");if(!window||!window.XMLHttpRequest)return e;l=!0;var n="Bearer "+(t=a({},f,t)).token,o=t.json?"application/json":"text/plain",u=!1,d=!1,g=t.suspend,m=void 0,v=function e(){if(!d&&!u&&(p.length||m)){if(u=!0,!m){m={messages:p},p=[];var i="";if(t.json)i=r({messages:m.messages});else{var a="";m.messages.forEach(function(e){var t=e.stacktrace?"\n"+e.stacktrace:"";i+=""+a+e.message+t,a="\n"})}m.content=i}var s=new window.XMLHttpRequest;s.open("POST",t.url,!0),s.setRequestHeader("Content-Type",o),t.token&&s.setRequestHeader("Authorization",n);var c=function(){d=!0,setTimeout(function(){d=!1,e()},g),g=t.backoff(g)},f=void 0;s.onreadystatechange=function(){4===s.readyState&&(u=!1,clearTimeout(f),200===s.status?(g=t.suspend,m=void 0,e()):c())},s.send(m.content),t.timeout&&(f=setTimeout(function(){u=!1,s.abort(),c()},t.timeout))}},w=e.methodFactory;return e.methodFactory=function(e,r,n){var o=w(e,r,n),a=c&&t.trace.some(function(t){return t===e});return function(){for(var r=arguments.length,c=Array(r),u=0;u<r;u++)c[u]=arguments[u];var f=t.timestamp();t.queueSize&&p.length>=t.queueSize&&p.shift();var l=a?s():"";if(l){var d=l.split("\n");d.splice(0,t.depth+3),l=d.join("\n")}p.push({message:i(c),stacktrace:l,timestamp:f,level:e,logger:n}),v(),o.apply(void 0,c)}},e.setLevel(e.getLevel()),e}},d=window?window.remote:void 0;remote.noConflict=function(){return window&&window.remote===remote&&(window.remote=d),remote},t.default=remote,e.exports=t.default});