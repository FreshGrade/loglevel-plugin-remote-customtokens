!function(e,t){if("function"==typeof define&&define.amd)define(["module","exports"],t);else if("undefined"!=typeof exports)t(module,exports);else{var n={exports:{}};t(n,n.exports),e.remote=n.exports}}(this,function(e,t){"use strict";function n(e){try{return JSON.stringify(e)}catch(e){if(!f)try{var t={};t.a=t,JSON.stringify(t)}catch(e){f=e.message}if(e.message===f)return"[Circular]";throw e}}function r(e){if(!Object.getOwnPropertyDescriptor||!Object.getPrototypeOf)return Object.prototype.toString.call(e).slice(8,-1);for(;e;){var t=Object.getOwnPropertyDescriptor(e,"constructor");if(void 0!==t&&"function"==typeof t.value&&""!==t.value.name)return t.value.name;e=Object.getPrototypeOf(e)}return""}function o(e){var t="",o=0;return e.length>1&&"string"==typeof e[0]&&(t=(t=e[0].replace(/(%?)(%([sdjo]))/g,function(t,i,a,s){if(!i){var c=e[o+=1],u="";switch(s){case"s":u+=c;break;case"d":u+=+c;break;case"j":u=n(c);break;case"o":var f=n(c);"{"!==f[0]&&"["!==f[0]&&(f="<"+f+">"),u=r(c)+f}return u}return t})).replace(/%{2,2}/g,"%"),o+=1),e.length>o&&(t&&(t+=" "),t+=e.slice(o).join(" ")),t}function i(){for(var e={},t=0;t<arguments.length;t+=1){var n=Object(arguments[t]);for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}function a(){try{throw new Error}catch(e){return e.stack}}function s(e,t){var n=[];this.length=function(){return n.length},this.push=function(r){t&&n.length>=e&&n.shift(),n.push(r[0])},this.send=function(){var e=n;return n=[],e}}function c(e){var t=this,n=window?window.localStorage:void 0,r={length:function(){return 0}};if(!n)return r;var o=void 0,i=void 0,a=void 0;try{o=n.getItem.bind(n),i=n.setItem.bind(n),a=n.removeItem.bind(n);var s=u+"-test";i(s,s),a(s)}catch(e){return r}var c=u+"-queue",f=u+"-sent",l=[],p=function(){for(;;){var t=JSON.stringify(l);if(t.length<512*e)try{i(c,t);break}catch(e){}l.shift()}},g=o(f);g&&(l=JSON.parse(g),a(f));var v=o(c);v&&(l=l.concat(JSON.parse(v))),p(),this.length=function(){return l.length},this.push=function(e){e.length&&(l=l.concat(e),p())},this.shift=function(e){var t=l.splice(0,e);return p(),t},this.send=function(e){var n=t.shift(e);return i(f,JSON.stringify(n)),n},this.confirm=function(){a(f)},this.unshift=function(e){e.length&&(l=e.concat(l),p())}}Object.defineProperty(t,"__esModule",{value:!0});var u="loglevel-plugin-remote",f=void 0,l=500,p=50,g={url:"/logger",token:"",timeout:0,interval:1e3,backoff:function(e){var t=2*e;return t>3e4&&(t=3e4),t+=.1*t*Math.random()},persist:"default",capacity:p,trace:["trace","warn","error"],depth:0,json:!1,timestamp:function(){return(new Date).toISOString()}},v=!!a(),h=void 0,d=void 0,m=void 0,remote={apply:function(e,t){function r(){function e(e){O=!0,setTimeout(function(){O=!1,r()},j),e||(j=t.backoff(j),"never"!==t.persist&&S!==w&&(w.unshift(k.messages),w.confirm(),k={messages:[]},w.push(y.send()),S=w))}if(!O&&!b){if(!k.messages.length)if(w.length())k.messages=w.send(w.length());else{if(!y.length())return;k.messages=y.send()}if(b=!0,!k.content)if(t.json)k.content=n({messages:k.messages});else{var o="";k.content="",k.messages.forEach(function(e){var t=e.stacktrace?"\n"+e.stacktrace:"";k.content+=""+o+e.message+t,o="\n"})}var i=new window.XMLHttpRequest;i.open("POST",t.url,!0),i.setRequestHeader("Content-Type",f),t.token&&i.setRequestHeader("Authorization",u);var a=void 0;t.timeout&&(a=setTimeout(function(){b=!1,i.abort(),e()},t.timeout)),i.onreadystatechange=function(){4===i.readyState&&(b=!1,clearTimeout(a),200===i.status?(j=t.interval,k={messages:[]},w.confirm(),"always"!==t.persist&&(S=y),e(!0)):e())},i.send(k.content)}}if(!e||!e.getLogger)throw new TypeError("Argument is not a root loglevel object");if(h)throw new Error("You can assign a plugin only one time");if(!window||!window.XMLHttpRequest)return e;h=e;var u="Bearer "+(t=i(g,t)).token,f=t.json?"application/json":"text/plain",w=new c;w.push||"never"===t.persist||(t.persist="never",t.capacity=l),t.capacity||(t.capacity="never"===t.persist?l:p);var y=new s(t.capacity,"never"===t.persist),b=!1,O=!1,j=t.interval,k={messages:[]},S="always"===t.persist?w:y;return d=d||e.methodFactory,m=function(e,n,i){var s=d(e,n,i),c=v&&t.trace.some(function(t){return t===e});return function(){for(var n=arguments.length,u=Array(n),f=0;f<n;f++)u[f]=arguments[f];var l=t.timestamp(),p=c?a():"";if(p){var g=p.split("\n");g.splice(0,t.depth+3),p=g.join("\n")}S.push([{message:o(u),level:e,logger:i,timestamp:l,stacktrace:p}]),r(),s.apply(void 0,u)}},e.methodFactory=m,e.setLevel(e.getLevel()),e},disable:function(){if(!h)throw new Error("You can't disable a not appled plugin");if(m!==h.methodFactory)throw new Error("You can't disable a plugin after appling another plugin");h.methodFactory=d,h.setLevel(h.getLevel()),d=void 0,h=void 0}},w=window?window.remote:void 0;remote.noConflict=function(){return window&&window.remote===remote&&(window.remote=w),remote},t.default=remote,e.exports=t.default});