!function(e,t){if("function"==typeof define&&define.amd)define(["module","exports"],t);else if("undefined"!=typeof exports)t(module,exports);else{var o={exports:{}};t(o,o.exports),e.remote=o.exports}}(this,function(e,t){"use strict";function o(e){try{return JSON.stringify(e)}catch(e){if(!n)try{var t={};t.a=t,JSON.stringify(t)}catch(e){n=e.message}if("TypeError"===e.name&&e.message===n)return"[Circular]";throw e}}function r(e){if(!Object.getOwnPropertyDescriptor||!Object.getPrototypeOf)return Object.prototype.toString.call(e).slice(8,-1);for(;e;){var t=Object.getOwnPropertyDescriptor(e,"constructor");if(void 0!==t&&"function"==typeof t.value&&""!==t.value.name)return t.value.name;e=Object.getPrototypeOf(e)}return""}Object.defineProperty(t,"__esModule",{value:!0});var n=void 0,i=function(e){var t="",n=0;return e.length>1&&"string"==typeof e[0]&&(t=(t=e[0].replace(/(%?)(%([sdjo]))/g,function(t,i,a,u){if(!i){var s=e[n+=1],c="";switch(u){case"s":c+=s;break;case"d":c+=+s;break;case"j":c=o(s);break;case"o":var f=o(s);"{"!==f[0]&&"["!==f[0]&&(f="<"+f+">"),c=r(s)+f}return c}return t})).replace(/%{2,2}/g,"%"),n+=1),e.length>n&&(t&&(t+=" "),t+=e.slice(n).join(" ")),t},a=function(e){for(var t=1;t<arguments.length;t+=1)for(var o in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],o)&&(e[o]=arguments[t][o]);return e},u=function(){try{throw new Error("")}catch(e){return e.stack}},s=!!u(),c=[],f=1,p=!1,l=!1,d=!1,g="";window&&window.location&&(g=window.location.origin||""),!g&&document&&document.location&&(g=document.location.origin||"");var m={url:g+"/logger",token:"",timeout:0,queueSize:0,trace:["trace","warn","error"],depth:0,json:!1,timestamp:function(){return(new Date).toISOString()},backoff:function(e){var t=2*e;return t>3e4?3e4:t},onMessageDropped:function(){}},v=function(e,t){if(!e||!e.getLogger)throw new TypeError("Argument is not a root loglevel object");if(p)throw new TypeError("You can assign a plugin only one time");if(!window||!window.XMLHttpRequest)return e;p=!0;var r="ontimeout"in new window.XMLHttpRequest;t=a({},m,t);for(var n={},g=0;g<t.trace.length;g+=1){var v=t.trace[g];n[v]=!0}var w=t.json?"application/json":"text/plain",h=function e(){if(c.length&&!l&&!d){l=!0;var n=c.shift(),i=void 0,a=new window.XMLHttpRequest;a.open("POST",t.url,!0),a.setRequestHeader("Content-Type",w),t.token&&a.setRequestHeader("Authorization","Bearer "+t.token);var u=function(){d=!0;var o=function(){d=!1,e()};setTimeout(o,f),f=t.backoff(f)},s=function(){a.abort(),c.unshift(n),l=!1,u()};a.onreadystatechange=function(){4===a.readyState&&(l=!1,clearTimeout(i),200!==a.status?(t.queueSize&&c.length>=t.queueSize?t.onMessageDropped(n):c.unshift(n),u()):(f=1,setTimeout(e,0)))},r?(a.timeout=t.timeout,a.ontimeout=s):t.timeout&&(i=setTimeout(s,t.timeout)),t.json?a.send(o(n)):a.send(""+n.message+n.stacktrace)}},y=e.methodFactory;return e.methodFactory=function(e,o,r){var a=y(e,o,r);return function(){for(var o=arguments.length,f=Array(o),p=0;p<o;p++)f[p]=arguments[p];var l=void 0;if(t.json&&(l=t.timestamp()),t.queueSize&&c.length>=t.queueSize){var d=c.shift();t.onMessageDropped(d.message)}var g=s&&e in n?u():"";if(g){var m=g.split("\n");m.splice(0,t.depth+3),g=m.join("\n")}t.json?c.push({message:i(f),stacktrace:g,timestamp:l,level:e,logger:r}):c.push({message:i(f),stacktrace:g?"\n"+g:""}),h(),a.apply(void 0,f)}},e.setLevel(e.getLevel()),e},remote={};remote.apply=v;var w=window?window.remote:void 0;remote.noConflict=function(){return window&&window.remote===remote&&(window.remote=w),remote},t.default=remote,e.exports=t.default});