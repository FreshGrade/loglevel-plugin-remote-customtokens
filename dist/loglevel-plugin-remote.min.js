!function(e,t){if("function"==typeof define&&define.amd)define(["module","exports"],t);else if("undefined"!=typeof exports)t(module,exports);else{var r={exports:{}};t(r,r.exports),e.remote=r.exports}}(this,function(e,t){"use strict";function r(e){try{return JSON.stringify(e)}catch(e){if(!o)try{var t={};t.a=t,JSON.stringify(t)}catch(e){o=e.message}if("TypeError"===e.name&&e.message===o)return"[Circular]";throw e}}function n(e){if(!Object.getOwnPropertyDescriptor||!Object.getPrototypeOf)return Object.prototype.toString.call(e).slice(8,-1);for(;e;){var t=Object.getOwnPropertyDescriptor(e,"constructor");if(void 0!==t&&"function"==typeof t.value&&""!==t.value.name)return t.value.name;e=Object.getPrototypeOf(e)}return""}Object.defineProperty(t,"__esModule",{value:!0});var o=void 0,i=function(e){var t="",o=0;return e.length>1&&"string"==typeof e[0]&&(t=(t=e[0].replace(/(%?)(%([sdjo]))/g,function(t,i,a,s){if(!i){var c=e[o+=1],u="";switch(s){case"s":u+=c;break;case"d":u+=+c;break;case"j":u=r(c);break;case"o":var f=r(c);"{"!==f[0]&&"["!==f[0]&&(f="<"+f+">"),u=n(c)+f}return u}return t})).replace(/%{2,2}/g,"%"),o+=1),e.length>o&&(t&&(t+=" "),t+=e.slice(o).join(" ")),t},a=function(e){for(var t=1;t<arguments.length;t+=1)for(var r in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],r)&&(e[r]=arguments[t][r]);return e},s=function(){try{throw new Error("")}catch(e){return e.stack}},c=!!s(),u="";window&&window.location&&(u=window.location.origin||""),!u&&document&&document.location&&(u=document.location.origin||"");var f={url:u+"/logger",token:"",timeout:0,suspend:100,queueSize:0,trace:["trace","warn","error"],depth:0,json:!1,timestamp:function(){return(new Date).toISOString()},backoff:function(e){var t=2*e;return t>3e4&&(t=3e4),t+=.1*t*Math.random()}},l=!1,p=[],remote={apply:function(e,t){if(!e||!e.getLogger)throw new TypeError("Argument is not a root loglevel object");if(l)throw new TypeError("You can assign a plugin only one time");if(!window||!window.XMLHttpRequest)return e;l=!0,t=a({},f,t);for(var n={},o=0;o<t.trace.length;o+=1){var u=t.trace[o];n[u]=!0}var d="Bearer "+t.token,g=t.json?"application/json":"text/plain",v=!1,m=!1,w=t.suspend,y=void 0,h=function e(){if(!m&&!v&&(p.length||y)){if(v=!0,!y){y={messages:p},p=[];var n="";if(t.json)n=r({messages:y.messages});else{var o="";y.messages.forEach(function(e){var t=e.stacktrace?"\n"+e.stacktrace:"";n+=""+o+e.message+t,o="\n"})}y.content=n}var i=new window.XMLHttpRequest;i.open("POST",t.url,!0),i.setRequestHeader("Content-Type",g),t.token&&i.setRequestHeader("Authorization",d);var a=function(){m=!0,setTimeout(function(){m=!1,e()},w),w=t.backoff(w)},s=void 0;i.onreadystatechange=function(){4===i.readyState&&(v=!1,clearTimeout(s),200===i.status?(w=t.suspend,y=void 0,e()):a())},i.send(y.content),t.timeout&&(s=setTimeout(function(){v=!1,i.abort(),a()},t.timeout))}},j=e.methodFactory;return e.methodFactory=function(e,r,o){var a=j(e,r,o),u=c&&e in n;return function(){for(var r=arguments.length,n=Array(r),c=0;c<r;c++)n[c]=arguments[c];var f=t.timestamp();t.queueSize&&p.length>=t.queueSize&&p.shift();var l=u?s():"";if(l){var d=l.split("\n");d.splice(0,t.depth+3),l=d.join("\n")}p.push({message:i(n),stacktrace:l,timestamp:f,level:e,logger:o}),h(),a.apply(void 0,n)}},e.setLevel(e.getLevel()),e}},d=window?window.remote:void 0;remote.noConflict=function(){return window&&window.remote===remote&&(window.remote=d),remote},t.default=remote,e.exports=t.default});